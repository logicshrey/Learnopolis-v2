"use strict";(()=>{var e={};e.id=307,e.ids=[307],e.modules={8432:e=>{e.exports=require("bcryptjs")},1185:e=>{e.exports=require("mongoose")},2113:e=>{e.exports=require("next-auth/next")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2187:(e,t,r)=>{r.r(t),r.d(t,{config:()=>h,default:()=>m,routeModule:()=>f});var n={};r.r(n),r.d(n,{default:()=>g});var i=r(1802),a=r(7153),o=r(6249),s=r(2113),l=r(7732),c=r(2250),u=r(7513),d=r(4949);class p{generateLearningPaths(e,t){let r=[],n=new Map;return t.forEach(e=>{e.subjects.forEach(t=>{n.has(t)||n.set(t,[]),n.get(t).push(e)})}),Object.entries(this.PATHS).forEach(([e,t])=>{let i=[];if(t.requiredSubjects.forEach(e=>{let t=(n.get(e)||[]).filter(e=>"beginner"===e.difficulty);t.length>0&&i.push(t[0])}),t.requiredSubjects.forEach(e=>{let t=(n.get(e)||[]).filter(e=>"intermediate"===e.difficulty);t.length>0&&i.push(t[0])}),t.requiredSubjects.forEach(e=>{let t=(n.get(e)||[]).filter(e=>"advanced"===e.difficulty);t.length>0&&i.push(t[0])}),i.length>=3){i.sort((e,t)=>{let r={beginner:1,intermediate:2,advanced:3};return r[e.difficulty]-r[t.difficulty]});let e=2*i.length;r.push({title:t.title,description:t.description,courses:i,estimatedTimeToComplete:`${e} weeks`,skillsGained:t.skillsGained})}}),r}constructor(){this.PATHS={web_development:{title:"Full-Stack Web Development",description:"Master the art of building web applications from front to back",requiredSubjects:["Web Development","Computer Science","UI/UX"],skillsGained:["HTML/CSS","JavaScript","React","Node.js","Databases"]},data_science:{title:"Data Science & Machine Learning",description:"Learn to analyze data and build predictive models",requiredSubjects:["Data Science","AI","Computer Science","Statistics"],skillsGained:["Python","Statistics","Machine Learning","Data Visualization"]},robotics:{title:"Robotics & Automation",description:"Build and program robots for the future",requiredSubjects:["Robotics","Mechanical Engineering","Electronics"],skillsGained:["Sensors","Actuators","Control Systems","Programming"]},renewable_energy:{title:"Renewable Energy Systems",description:"Design and implement sustainable energy solutions",requiredSubjects:["Energy","Environmental Engineering","Electrical Engineering"],skillsGained:["Solar Energy","Wind Power","Energy Storage","Sustainability"]},cybersecurity:{title:"Cybersecurity Professional",description:"Protect systems and networks from digital threats",requiredSubjects:["Cybersecurity","Computer Science","Networking"],skillsGained:["Network Security","Ethical Hacking","Cryptography","Security Analysis"]},blockchain:{title:"Blockchain Developer",description:"Build decentralized applications and smart contracts",requiredSubjects:["Blockchain","Computer Science","Cryptography"],skillsGained:["Smart Contracts","Cryptocurrency","Distributed Systems","Web3"]},game_development:{title:"Game Development",description:"Create engaging and immersive gaming experiences",requiredSubjects:["Game Development","Computer Science","Design"],skillsGained:["Unity","C#","Game Design","3D Modeling","Animation"]},cloud_computing:{title:"Cloud Solutions Architect",description:"Design and implement scalable cloud infrastructure",requiredSubjects:["Cloud Computing","DevOps","Computer Science"],skillsGained:["AWS","Azure","Infrastructure as Code","Containerization","Microservices"]}}}}async function g(e,t){if("GET"!==e.method)return t.status(405).json({message:"Method not allowed"});let r=await (0,s.getServerSession)(e,t,l.authOptions);if(!r||!r.user?.id)return t.status(401).json({message:"Not authenticated"});try{await (0,c.u)();let e=await u.Z.findById(r.user.id);if(!e)return t.status(404).json({message:"User not found"});let n=await d.Z.find(),i=new p().generateLearningPaths(e,n);t.status(200).json({learningPaths:i})}catch(e){console.error("Error generating learning paths:",e),t.status(500).json({message:"Error generating learning paths"})}}let m=(0,o.l)(n,"default"),h=(0,o.l)(n,"config"),f=new i.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/ai/learning-paths",pathname:"/api/ai/learning-paths",bundlePath:"",filename:""},userland:n})},2250:(e,t,r)=>{r.d(t,{u:()=>s});var n=r(1185),i=r.n(n);let a=process.env.MONGODB_URI||"mongodb://localhost:27017/learnopolis";if(!a)throw Error("Please define the MONGODB_URI environment variable");let o=global.mongoose;async function s(){return o.conn||(o.promise||(console.log("Connecting to MongoDB..."),o.promise=i().connect(a,{bufferCommands:!1}).then(e=>(console.log("Connected to MongoDB"),e)).catch(e=>{throw console.error("Error connecting to MongoDB:",e),e})),o.conn=await o.promise),o.conn}o||(o=global.mongoose={conn:null,promise:null}),i().connection.on("error",e=>{console.error("MongoDB connection error:",e)})},4949:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1185),i=r.n(n);let a=new(i()).Schema({title:{type:String,required:!0},content:{type:String,required:!0},quiz:[{question:String,options:[String],correctAnswer:Number}]}),o=new(i()).Schema({title:{type:String,required:!0},description:{type:String,required:!0},difficulty:{type:String,enum:["beginner","intermediate","advanced"],required:!0},subjects:[{type:String,required:!0}],modules:[a],enrollmentCount:{type:Number,default:0},averageRating:{type:Number,default:0},createdAt:{type:Date,default:Date.now}}),s=i().models.Course||i().model("Course",o)},7513:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(1185),i=r.n(n);let a=new(i()).Schema({courseId:{type:i().Schema.Types.ObjectId,ref:"Course"},completedModules:[{type:Number}],quizScores:{type:Map,of:Number},completed:{type:Boolean,default:!1}}),o=new(i()).Schema({title:String,description:String,icon:String,unlockedAt:Date}),s=new(i()).Schema({challengeId:{type:i().Schema.Types.ObjectId,ref:"DailyChallenge"},completed:Boolean,completedAt:Date}),l=new(i()).Schema({courseId:{type:i().Schema.Types.ObjectId,ref:"Course"},issuedAt:Date,certificateUrl:String}),c=new(i()).Schema({name:String,email:{type:String,required:!0,unique:!0},username:{type:String},password:{type:String,required:!0},image:String,points:{type:Number,default:0},level:{type:Number,default:1},streak:{type:Number,default:0},progress:[a],achievements:[o],dailyChallenges:[s],certificates:[l]}),u=i().models.User||i().model("User",c)},7732:(e,t,r)=>{r.r(t),r.d(t,{authOptions:()=>d,default:()=>p});let n=require("next-auth");var i=r.n(n);let a=require("next-auth/providers/credentials");var o=r.n(a),s=r(8432),l=r.n(s),c=r(2250),u=r(7513);let d={providers:[o()({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)throw Error("Please enter email and password");try{await (0,c.u)();let t=await u.Z.findOne({email:e.email});if(!t)throw Error("No user found with this email");if(!t.password)throw Error("Invalid user account. Please contact support.");if(!await l().compare(e.password,t.password))throw Error("Invalid password");return{id:t._id.toString(),email:t.email,name:t.name,image:t.image,level:t.level,points:t.points}}catch(e){throw console.error("Auth error:",e),e}}})],callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.level=t.level,e.points=t.points),e),session:async({session:e,token:t})=>(t&&(e.user.id=t.id,e.user.level=t.level,e.user.points=t.points),e)},pages:{signIn:"/auth/signin",signOut:"/auth/signout",error:"/auth/error"},session:{strategy:"jwt",maxAge:2592e3},secret:process.env.NEXTAUTH_SECRET||"your-secret-key",debug:!1},p=i()(d)},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=2187);module.exports=r})();