(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(1645)}])},6081:function(e,r,s){"use strict";s.d(r,{Z:function(){return c}});var t=s(5893),a=s(7294),i=s(1664),n=s.n(i),d=s(1163),l=s(3299),o=s(241);function c(){let{data:e}=(0,l.useSession)(),r=(0,d.useRouter)(),[s,i]=(0,a.useState)(!1),{theme:c,toggleTheme:x}=(0,o.F)(),h=[{name:"Home",href:"/"},{name:"Courses",href:"/courses"},{name:"Videos",href:"/videos"},{name:"Learning Paths",href:"/learning-paths"},{name:"Leaderboard",href:"/leaderboard"}],m=(e,r)=>"/"===r?"/"===e:e.startsWith(r);return(0,t.jsxs)("nav",{className:"bg-white dark:bg-gray-800 shadow-sm transition-colors duration-200",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(n(),{href:"/",className:"text-2xl font-bold text-indigo-600",children:"Learnopolis"})}),(0,t.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:h.map(e=>(0,t.jsx)(n(),{href:e.href,className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ".concat(m(r.pathname,e.href)?"border-indigo-500 text-gray-900 dark:text-white":"border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-100"),children:e.name},e.name))})]}),(0,t.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:[e?(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(n(),{href:"/dashboard",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ".concat("/dashboard"===r.pathname?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Dashboard"}),(0,t.jsx)(n(),{href:"/profile",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ".concat("/profile"===r.pathname?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Profile"}),(0,t.jsx)("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/"}),className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Logout"})]}):(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(n(),{href:"/auth/signin",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Login"}),(0,t.jsx)(n(),{href:"/auth/signup",className:"px-3 py-2 rounded-md text-sm font-medium bg-indigo-600 text-white hover:bg-indigo-700",children:"Sign Up"})]}),(0,t.jsx)("button",{onClick:x,className:"p-2 rounded-md text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100","aria-label":"Toggle theme",children:"light"===c?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})]}),(0,t.jsx)("div",{className:"-mr-2 flex items-center sm:hidden",children:(0,t.jsxs)("button",{onClick:()=>i(!s),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open main menu"}),s?(0,t.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):(0,t.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),s&&(0,t.jsxs)("div",{className:"sm:hidden",children:[(0,t.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[h.map(e=>(0,t.jsx)(n(),{href:e.href,className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200 ".concat(m(r.pathname,e.href)?"bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-700 dark:text-indigo-200":"border-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 hover:text-gray-800 dark:hover:text-gray-100"),children:e.name},e.name)),e&&(0,t.jsx)(n(),{href:"/profile",className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200 ".concat("/profile"===r.pathname?"bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-700 dark:text-indigo-200":"border-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 hover:text-gray-800 dark:hover:text-gray-100"),children:"Profile"})]}),(0,t.jsx)("div",{className:"pt-4 pb-3 border-t border-gray-200 dark:border-gray-700",children:e?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n(),{href:"/dashboard",className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200 ".concat("/dashboard"===r.pathname?"bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-700 dark:text-indigo-200":"border-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 hover:text-gray-800 dark:hover:text-gray-100"),children:"Dashboard"}),(0,t.jsx)("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/"}),className:"block w-full text-left pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"Logout"})]}):(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n(),{href:"/auth/signin",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"Login"}),(0,t.jsx)(n(),{href:"/auth/signup",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"Sign Up"})]})})]})]})}},1645:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return m}});var t=s(5893),a=s(3299),i=s(1163),n=s(7294),d=s(6081),l=s(1664),o=s.n(l);function c(){let[e,r]=(0,n.useState)([]),[s,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=await fetch("/api/ai/recommendations"),s=await e.json();r(s.recommendations||[])}catch(e){console.error("Error fetching recommendations:",e)}finally{a(!1)}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"AI Recommended For You"]})}),s?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"AI is finding the perfect courses for you..."})]}):e.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.subjects&&e.subjects.map((e,r)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded-full",children:e},r))}),(0,t.jsx)("div",{className:"text-sm text-indigo-600 mb-3 italic",children:e.reason}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("beginner"===e.difficulty?"bg-green-200 text-green-800":"intermediate"===e.difficulty?"bg-blue-200 text-blue-800":"bg-purple-200 text-purple-800"),children:e.difficulty&&e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1)}),(0,t.jsx)(o(),{href:"/courses/".concat(e.id||e._id),className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"View Course →"})]})]},e.id||e._id))}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Complete more courses to get personalized recommendations"})})]})}function x(){let[e,r]=(0,n.useState)([]),[s,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=await fetch("/api/ai/learning-paths"),s=await e.json();r(s.learningPaths||[])}catch(e){console.error("Error fetching learning paths:",e)}finally{a(!1)}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Learning Paths"]})}),s?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Generating learning paths..."})]}):e.length>0?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e[0].title}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:e[0].description}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,t.jsx)("div",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm",children:e[0].estimatedTimeToComplete}),e[0].skillsGained.slice(0,3).map((e,r)=>(0,t.jsx)("div",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:e},r)),e[0].skillsGained.length>3&&(0,t.jsxs)("div",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:["+",e[0].skillsGained.length-3," more"]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"First steps:"}),(0,t.jsx)("div",{className:"space-y-2",children:e[0].courses.slice(0,2).map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-800 font-bold text-xs",children:r+1}),(0,t.jsx)("div",{className:"ml-2 text-sm font-medium text-gray-900",children:e.title})]},r))})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," learning path",e.length>1?"s":""," available"]}),(0,t.jsxs)(o(),{href:"/learning-paths",className:"inline-flex items-center text-indigo-600 hover:text-indigo-800 font-medium",children:["View all paths",(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Complete more courses to unlock personalized learning paths"}),(0,t.jsx)(o(),{href:"/courses",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Browse Courses"})]})]})}function h(){let[e,r]=(0,n.useState)([]),[s,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{i()},[]);let i=async()=>{try{console.log("Fetching recent videos...");let e=await fetch("/api/videos?limit=3"),s=await e.json();console.log("Response from videos API:",s),e.ok?r(s.videos):console.error("Error response from videos API:",s)}catch(e){console.error("Error fetching recent videos:",e)}finally{a(!1)}},d=e=>{switch(e){case"beginner":return"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";case"intermediate":return"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200";case"advanced":return"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200";default:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}},l=e=>{let r=Math.floor(e%60);return"".concat(Math.floor(e/60),":").concat(r<10?"0":"").concat(r)};return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-indigo-600 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Recent Videos"]})}),s?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading videos..."})]}):e.length>0?(0,t.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,t.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded-md overflow-hidden relative",children:[(0,t.jsx)("img",{src:"https://img.youtube.com/vi/".concat(e.videoId,"/mqdefault.jpg"),alt:e.title,className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-indigo-600 bg-opacity-80 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})})]}),(0,t.jsxs)("div",{className:"ml-4 flex-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),(0,t.jsxs)("div",{className:"mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("span",{children:l(e.duration)}),(0,t.jsx)("span",{className:"mx-1",children:"•"}),(0,t.jsx)("span",{children:e.subject}),(0,t.jsx)("span",{className:"mx-1",children:"•"}),(0,t.jsx)("span",{className:"px-1.5 py-0.5 rounded-full text-xs ".concat(d(e.difficulty)),children:e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1)})]})]}),(0,t.jsx)(o(),{href:"/videos?videoId=".concat(e._id),className:"ml-4 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Watch"})]},e._id)),(0,t.jsx)("div",{className:"text-center pt-4",children:(0,t.jsxs)(o(),{href:"/videos",className:"inline-flex items-center text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:["View all videos",(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"No videos available yet"}),(0,t.jsx)(o(),{href:"/videos",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Browse Videos"})]})]})}function m(){var e,r,s;let{data:l,status:m}=(0,a.useSession)(),g=(0,i.useRouter)(),[u,p]=(0,n.useState)([]),[f,b]=(0,n.useState)(!0),[v,y]=(0,n.useState)(!1),[j,N]=(0,n.useState)(0),[w,k]=(0,n.useState)([]),[C,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{"unauthenticated"===m&&g.push("/auth/signin"),(null==l?void 0:l.user)&&(L(),S(),z())},[l,m,g]);let L=async()=>{try{let e=await fetch("/api/courses/progress"),r=await e.json();p(r.progress||[])}catch(e){console.error("Error fetching progress:",e),p([])}finally{b(!1)}},S=async()=>{try{let e=await fetch("/api/courses/count"),r=await e.json();N(r.count)}catch(e){console.error("Error fetching courses count:",e),N(0)}},z=async()=>{M(!0);try{let e=await fetch("/api/ai/recommendations"),r=await e.json();k(r.recommendations||[])}catch(e){console.error("Error fetching recommendations:",e)}finally{M(!1)}},A=async()=>{try{y(!0),(await fetch("/api/admin/seed-courses",{method:"POST"})).ok?(await S(),alert("Sample courses added successfully! Go to the courses page to see them.")):alert("Failed to add sample courses.")}catch(e){console.error("Error seeding database:",e),alert("An error occurred while adding sample courses.")}finally{y(!1)}};return"loading"===m||f?(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Z,{}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your dashboard..."})]})})]}):l?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[0===j&&(0,t.jsx)("div",{className:"mb-8 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"No courses found in the database. Add sample courses to get started."}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("button",{onClick:A,disabled:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:v?"Adding Courses...":"Add Sample Courses"})})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Welcome back, ",(null===(e=l.user)||void 0===e?void 0:e.name)||"User","!"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Level"}),(0,t.jsx)("span",{className:"font-semibold",children:(null===(r=l.user)||void 0===r?void 0:r.level)||1})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Points"}),(0,t.jsx)("span",{className:"font-semibold",children:(null===(s=l.user)||void 0===s?void 0:s.points)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Courses Enrolled"}),(0,t.jsx)("span",{className:"font-semibold",children:(null==u?void 0:u.length)||0})]}),(0,t.jsxs)("div",{className:"pt-4 mt-4 border-t border-gray-200",children:[(0,t.jsx)(o(),{href:"/courses",className:"block w-full px-4 py-2 bg-indigo-600 text-white text-center rounded-md hover:bg-indigo-700",children:"Browse Courses"}),0===j&&(0,t.jsx)("button",{onClick:A,disabled:v,className:"mt-4 w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:v?"Adding Courses...":"Add Sample Courses"})]})]})]})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Your Courses"}),u&&u.length>0?(0,t.jsx)("div",{className:"space-y-6",children:u.map(e=>{var r,s,a,i;return(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.courseId.title}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:e.courseId.description}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[(null===(r=e.completedModules)||void 0===r?void 0:r.length)||0," / ",(null===(s=e.courseId.modules)||void 0===s?void 0:s.length)||0," modules"]})]}),(0,t.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,t.jsx)("div",{className:"h-2 bg-indigo-600 rounded-full",style:{width:"".concat((null===(a=e.courseId.modules)||void 0===a?void 0:a.length)?(null===(i=e.completedModules)||void 0===i?void 0:i.length)/e.courseId.modules.length*100:0,"%")}})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.courseId.difficulty.charAt(0).toUpperCase()+e.courseId.difficulty.slice(1)}),(0,t.jsx)(o(),{href:"/courses/".concat(e.courseId._id),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200",children:"Continue Learning →"})]})]},e.courseId._id)})}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses enrolled yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Start your learning journey by enrolling in a course"}),(0,t.jsx)(o(),{href:"/courses",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Browse Courses"})]})]})})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(c,{})}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(x,{})}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(h,{})})]})]}):(g.push("/auth/signin"),null)}},1163:function(e,r,s){e.exports=s(3035)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);